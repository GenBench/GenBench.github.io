---
title: "GenBench Evaluation Cards"
excerpt: "Generate an evaluation card for your paper"
permalink: /eval_cards/
layout: single_wide
header:
  <!-- overlay_image: /assets/images/unsplash-image-1.jpg -->
  overlay_color: "#268"
---

<!-- Set some styles for the generation script -->
<style>
    .property::first-letter, .field-label::first-letter {
        text-transform:capitalize;
    }

    .property {
        font-weight: bold;
        width: 10%;
    }

    .exp-property-row {
        display: flex;
        flex-flow: row wrap;
        justify-content: flex-start;
    }

    .exp-property-col {
        padding: 5px;
        text-align: left;
    }

    .exp-property-checkboxes {
        display: flex;
        flex-flow: row;
    }

    .field-label {
        margin-right: 15px;
        margin-left: 3px;
        text-align: center;
    }
</style>


<section>
    <p>
    Some text
    </p>
    <p class="mb-2">Please indicate the <a href="https://genbench.org/taxonomy/"><span
            style="font-variant: small-caps">GenBench</span> taxonomy values</a> for all the experiments in your study.
    </p>
    <div id="experiments"></div>
    <div class="mb-3">
        <button type="button" class="btn btn-outline-success" id="btn-add"><i class="bi bi-plus-circle"></i> Add Experiment</button>
    </div>
    <div class="exp-property-row">
        <button type="button" class="btn btn-primary" id="btn-generate">Generate <span style="font-variant: small-caps">GenBench</span> evaluation card</button>
        <div class="btn-group" style="display: none;" id="btn-latex-text-actions">
            <button type="button" id="btn-copy" class="btn btn-outline-secondary"><i class="bi bi-clipboard-fill"></i></button>
            <a id="btn-download" class="btn btn-outline-secondary"><i class="bi bi-cloud-arrow-down-fill"></i></a>
        </div>
    </div>
    <div id="latex-display" class="mt-3">
        <pre><code data-lang="latex" id="latex-code"></code></pre>
    </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.2.min.js" integrity="sha256-2krYZKh//PcchRtd+H+VyyQoZ/e3EcrkxhM8ycwASPA=" crossorigin="anonymous"></script>
<script>
    let expNum = 1;
    const attrValues = {
        'motivation': ['practical', 'cognitive', 'intrinsic', 'fairness_inclusivity'],
        'type': ['compositional', 'structural', 'across_task', 'across_language', 'across_domain', 'robustness'],
        'shift_type': ['covariate', 'label', 'full', 'assumed'],
        'shift_source': ['naturally_occurring', 'partitioned_natural_data', 'generated_shifts', 'fully_generated_data'],
        'shift_locus': ['train-test', 'finetune_train-test', 'pretrain-train', 'pretrain-test']
    }
    // symbols to define experiments
    const exp_names = {
             1: "\\firstexp",
             2: "\\secondexp",
             3: "\\thirdexp"
    }
    const exp_symbols = {
             1: "square",
             2: "bigtriangleup",
             3: "bigcirc"
     }

    const latex_header = ` \
        \n\\documentclass{standalone} \
        \n \
        \n\\usepackage{xcolor} \
        \n\\usepackage{colortbl} \
        \n\\usepackage{amssymb} \
        \n \
        \n\\begin{document} \
        \n \
        \n% Set tabular size\n\\newcommand{\\tabularwidth}{11cm}`
    let exp_defs = ""     // Create variable to store experiment symbols to be generated
    let latex_body = ""
    const axis_headers = {
          'motivation': ` \
              \n% Record the experiments' motivations \
              \n\\rowcolor{gray!60} \
              \n\\textbf{Motivation} \\\\ \
              \n\\footnotesize \
              \n\\begin{tabular}{p{2.6cm}p{2.6cm}<{\\centering} p{2.6cm}<{\\centering}p{2.6cm}<{\\centering}} \
              \n\\textit{Practical} & \\textit{Cognitive} & \\textit{Intrinsic} & \\textit{Fairness}\\\\ \
              \n\\large`,
          'type':  ` \
              \n% Record the experiments' generalisation type \
              \n\\rowcolor{gray!60} \
              \n\\textbf{Generalisation type} \\\\ \
              \n\\footnotesize \
              \n\\begin{tabular}{p{2.3cm}p{1.7cm}<{\\centering}p{1.6cm}<{\\centering}p{1.7cm}<{\\centering}p{1.7cm}<{\\centering}p{1.7cm}<{\\centering}} \
                \n\\textit{Compositional} & \\textit{Structural} & \\textit{Task} & \\textit{Language} & \\textit{Domain} & \\textit{Robustness}\\\\ \
             \n\\large`,
          'shift_type': ` \
            \n% Record the experiments' shift type \
            \n\\rowcolor{gray!60} \
            \n\\textbf{Shift type} \\\\ \
            \n\\footnotesize \
            \n\\begin{tabular}{p{2.6cm}p{2.6cm}<{\\centering}p{2.6cm}<{\\centering}p{2.6cm}<{\\centering}} \
            \n\\textit{Covariate} & \\textit{Label} & \\textit{Full} & \\textit{Assumed}\\\\ \
            \n\\large`,
        'shift_source': ` \
            \n% Record the experiments' shift source \
            \n\\rowcolor{gray!60} \
            \n\\textbf{Shift source} \\\\ \
            \n\\footnotesize \
            \n\\begin{tabular}{p{2.7cm} p{2.9cm}<{\\centering} p{2.4cm}<{\\centering} p{2.3cm}<{\\centering}} \
            \n\\textit{Naturally occuring} & \\textit{Partitioned natural} & \\textit{Generated shift} & \\textit{Fully generated}\\\\ \
            \n\\large`,
        'shift_locus': ` \
            \n% Record the experiments' shift locus \
            \n\\rowcolor{gray!60} \
            \n\\textbf{Shift locus}\\\\ \
            \n\\footnotesize \
            \n\\begin{tabular}{p{2.1cm}p{3.1cm}<{\\centering} p{2.5cm}<{\\centering} p{2.4cm}<{\\centering}} \
            \n\\textit{Train--test} & \\textit{Finetune train--test} & \\textit{Pretrain--train} & \\textit{Pretrain--test}\\\\ \
            \n\\large`,
     }
    const axes_footer = "\n\\vspace{2mm} \\\\\n\\end{tabular}\\\\\n"

    const latex_footer = "\n\\end{document}"
    const table_header = `\
        \n% Create table \
        \n\\renewcommand{\\arraystretch}{1.1} \
        \n\\setlength{\\tabcolsep}{0mm} \
        \n\\begin{tabular}{|p{\\tabularwidth}<{\\centering}|} \
        \n\\hline\n`

    const table_footer = "\n\\hline\n\\end{tabular}\n"

    function generateLatex() {
        // Add experiment symbols
        latex_body = "\n\n% Set symbols for experiments\n"
        exp_defs = ''
        for (let eNum = 1; eNum < expNum; eNum++) {
            // exp_defs += "\n" + exp_symbols[eNum];
            exp_defs += "\\newcommand{" + exp_names[eNum] + "}{$\\" + exp_symbols[eNum] + "$}\n";
        }

        // Add table header
        latex_body += exp_defs;
        latex_body += table_header;

        // Loop over axes
        for (const [axis, header] of Object.entries(axis_headers)) {
            // Add axis subtable header
            latex_body += header + "\n";

             // Loop over values for current axis
             for (const valIndex in attrValues[axis]) {
                 const valName = attrValues[axis][valIndex]
                // loop over recorded experiments
                for (let eNum = 1; eNum < expNum; eNum++) {
                    // check if value is ticked for current experiment
                    if ($('#exp-'+eNum+'-'+axis+'-'+valName).is(':checked')) {
                        latex_body += exp_names[eNum] + "\\hspace{0.5mm}";
                     }
                 }

                // Make sure ampersands get added
                if (valIndex!==0) {
                    latex_body += "& \\large";
                }
                latex_body += "\t\t% " + valName + "\n";
            }

            // Add axis sub-table footer
            latex_body += axes_footer
        }

        latex_body += table_footer
        $('#latex-code').empty().append(latex_header + latex_body + latex_footer);
        $("#btn-copy").html('<i class="bi bi-clipboard-fill"></i>');
        setDownloadLink();
        $('#btn-latex-text-actions').show();
    }
    
    function copyToClip() {
        const textToCopy = $('#latex-code').text();
        function listener(e) {
            e.clipboardData.setData("text/html", textToCopy);
            e.clipboardData.setData("text/plain", textToCopy);
            e.preventDefault();
            $("#btn-copy").html('<i class="bi bi-clipboard-check-fill"></i>')
        }
        document.addEventListener("copy", listener);
        document.execCommand("copy");
        document.removeEventListener("copy", listener);
    }
    
    function setDownloadLink() {
        const textToCopy = $('#latex-code').text();
        $('#btn-download').attr("download", "GenBench_eval_card.tex").attr("href", "data:application/octet-stream;charset=utf-8," +  encodeURIComponent(textToCopy));
    }

    function addExperiment(){
        const expElem = $('<div class="experiment mb-3">')
            .append($('<h4>').text('Experiment ' + expNum));
        for (const [key, value] of Object.entries(attrValues)) {
            const rowElem = $('<div class="exp-property-row">');
            const checkboxesElem = $('<div class="exp-property-col exp-property-checkboxes">');
            rowElem.append($('<div class="exp-property-col property">').text(key.replace('_',' ')))
            for (const propIndex in value) {
                const propertyName = value[propIndex];
                checkboxesElem
                    .append($('<input type="checkbox" id="exp-'+expNum+'-'+key+'-'+propertyName+'">'))
                    .append($('<label class="field-label" for="exp-'+expNum+'-'+key+'-'+propertyName+'">'+propertyName.replaceAll('_',' ')+'</label>'))
            }
            rowElem.append(checkboxesElem);
            expElem.append(rowElem);
        }

        $('#experiments').append(expElem);
        expNum += 1;
    }
    $('#btn-add').click(addExperiment);
    $('#btn-generate').click(generateLatex);
    $('#btn-copy').click(copyToClip);
</script>
